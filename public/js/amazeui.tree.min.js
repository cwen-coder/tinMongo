!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AMUITree=e()}}(function(){return function e(t,s,n){function i(a,o){if(!s[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(l)return l(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var d=s[a]={exports:{}};t[a][0].call(d.exports,function(e){var s=t[a][1][e];return i(s?s:e)},d,d.exports,e,t,s,n)}return s[a].exports}for(var l="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,s){"use strict";function n(e,t,s){t.addClass(e.classes.selected),"item"===t.data("type")&&s.hasClass(e.itemIcon)&&s.removeClass(e.itemIcon).addClass(e.itemSelectedIcon)}function i(e,t,s){t.removeClass(e.classes.selected),"item"===t.data("type")&&s.hasClass(e.itemSelectedIcon)&&s.removeClass(e.itemSelectedIcon).addClass(e.itemIcon)}function l(e,t,s){o.each(s.$elements,function(e,n){var i=o(n);i[0]!==t.$element[0]&&s.dataForEvent.push(o(i).data())}),t.$element.hasClass(e.classes.selected)?(i(e,t.$element,t.$icon),s.eventType="deselected"):(n(e,t.$element,t.$icon),s.eventType="selected",s.dataForEvent.push(t.elementData))}function a(e,t,s){if(s.$elements[0]!==t.$element[0]){{e.deselectAll(e.$element)}n(e,t.$element,t.$icon),s.eventType="selected",s.dataForEvent=[t.elementData]}else i(e,t.$element,t.$icon),s.eventType="deselected",s.dataForEvent=[]}var o=window.jQuery,c=o.fn.tree,r=function(e,t){this.$element=o(e),this.options=o.extend({},o.fn.tree.defaults,t);var s=this.$element.data("itemIcon")||this.options.itemIcon,n=this.$element.data("itemSelectedIcon")||this.options.itemSelectedIcon;this.folderIcon=this._getIconClass(this.options.folderIcon),this.folderOpenIcon=this._getIconClass(this.options.folderOpenIcon),this.itemIcon=this._getIconClass(s),this.itemSelectedIcon=this._getIconClass(n),this.classes={},o.each(this.options.classes,o.proxy(function(e,t){this.classes[e]=this._getClass(t)},this)),this.options.itemSelect&&this.$element.on("click.tree.amui","."+this.classes.item,o.proxy(function(e){this.selectItem(e.currentTarget)},this)),this.$element.on("click.tree.amui","."+this.classes.branchName,o.proxy(function(e){this.toggleFolder(e.currentTarget)},this)),this.options.folderSelect&&(this.$element.addClass(this.options.classPrefix+"-folder-select"),this.$element.off("click.tree.amui","."+this.classes.branchName),this.$element.on("click.tree.amui","."+this.classes.iconCaret,o.proxy(function(e){this.toggleFolder(o(e.currentTarget).parent())},this)),this.$element.on("click.tree.amui","."+this.classes.branchName,o.proxy(function(e){this.selectFolder(o(e.currentTarget))},this))),this.render()};r.prototype={constructor:r,deselectAll:function(e){var t=this;e=e||this.$element;var s=o(e).find("."+this.classes.selected);return s.each(function(e,s){i(t,o(s),o(s).find("."+t.classes.icon))}),s},destroy:function(){return this.$element.find("li:not([data-template])").remove(),this.$element.remove(),this.$element[0].outerHTML},render:function(){this.populate(this.$element)},populate:function(e){var t=this,s=e.hasClass(this.options.classPrefix)?e:e.parent(),n=s.find("."+this.classes.loader).eq(0),i=s.data();n.removeClass(this.options.hiddenClass),this.options.dataSource(i,function(i){n.addClass(t.options.hiddenClass),o.each(i.data,function(n,i){var l;"folder"===i.type?(l=t.$element.find("[data-template=treebranch]").first().clone().removeClass(t.options.hiddenClass).removeData("template"),l.data(i),l.find("."+t.classes.iconFolder).addClass(t.folderIcon),l.find("."+t.classes.branchName+" > ."+t.classes.label).html(i.title)):"item"===i.type&&(l=t.$element.find("[data-template=treeitem]").first().clone().removeClass(t.options.hiddenClass).removeData("template"),l.find("."+t.classes.itemName+" > ."+t.classes.label).html(i.title),l.data(i),l.find("."+t.classes.iconItem).addClass(t.itemIcon));var a=i.attr||[];o.each(a,function(e,s){switch(e){case"classNames":l.addClass(s);break;case"icon":var n=[t.classes.icon,t.classes.iconItem,s].join(" ");l.find("."+t.classes.iconItem).removeClass().addClass(n),l.data(e,s);break;case"id":l.attr(e,s),l.attr("aria-labelledby",s+"-label"),l.find("."+t.classes.branchName+" > ."+t.classes.label).attr("id",s+"-label");break;default:l.attr(e,s)}}),e.hasClass(t.classes.branchHeader)?s.find("."+t.classes.branchChildren).eq(0).append(l):e.append(l)}),t.$element.trigger("loaded.tree.amui",s)})},selectTreeNode:function(e,t){var s={};s.$element=o(e);var n={};n.$elements=this.$element.find("."+this.classes.selected),n.dataForEvent=[],"folder"===t?(s.$element=s.$element.closest("."+this.classes.branch),s.$icon=s.$element.find("."+this.classes.iconFolder)):s.$icon=s.$element.find("."+this.classes.iconItem),s.elementData=s.$element.data(),this.options.multiSelect?l(this,s,n):a(this,s,n),this.$element.trigger(n.eventType+".tree.amui",{target:s.elementData,selected:n.dataForEvent}),s.$element.trigger("updated.tree.amui",{selected:n.dataForEvent,item:s.$element,eventType:n.eventType})},discloseFolder:function(e){var t=o(e),s=t.closest("."+this.classes.branch),n=s.find("."+this.classes.branchChildren),i=n.eq(0);s.addClass(this.classes.open),s.attr("aria-expanded","true"),i.removeClass(this.options.hiddenClass),s.find("> ."+this.classes.branchHeader+" ."+this.classes.iconFolder).eq(0).removeClass(this.folderIcon).addClass(this.folderOpenIcon),n.children().length||this.populate(n),this.$element.trigger("disclosedFolder.tree.amui",s.data())},closeFolder:function(e){var t=o(e),s=t.closest("."+this.classes.branch),n=s.find("."+this.classes.branchChildren),i=n.eq(0);s.removeClass(this.classes.open),s.attr("aria-expanded","false"),i.addClass(this.options.hiddenClass),s.find("> ."+this.classes.branchHeader+" ."+this.classes.iconFolder).eq(0).removeClass(this.folderOpenIcon).addClass(this.folderIcon),this.options.cacheItems||i.empty(),this.$element.trigger("closed.tree.amui",s.data())},toggleFolder:function(e){var t=o(e);t.find("."+this.folderIcon).length?this.discloseFolder(e):t.find("."+this.folderOpenIcon).length&&this.closeFolder(e)},selectFolder:function(e){this.options.folderSelect&&this.selectTreeNode(e,"folder")},selectItem:function(e){this.options.itemSelect&&this.selectTreeNode(e,"item")},selectedItems:function(){var e=this.$element.find("."+this.classes.selected),t=[];return o.each(e,function(e,s){t.push(o(s).data())}),t},closeAll:function(){var e=this,t=[],s=function n(s,i){t.push(i),0===e.$element.find("."+e.classes.branch+"."+e.classes.open+':not(".am-hide")').length&&(e.$element.trigger("closedAll.tree.amui",{tree:e.$element,reportedClosed:t}),e.$element.off("loaded.tree.amui",e.$element,n))};e.$element.on("closed.tree.amui",s),e.$element.find("."+e.classes.branch+"."+e.classes.open+':not(".am-hide")').each(function(){e.closeFolder(this)})},discloseVisible:function(){var e=this,t=e.$element.find("."+this.classes.branch+':not(".'+this.classes.open+', .am-hide")'),s=[],n=function i(n,l){s.push(l),s.length===t.length&&(e.$element.trigger("disclosedVisible.tree.amui",{tree:e.$element,reportedOpened:s}),e.$element.off("loaded.tree.amui",e.$element,i))};e.$element.on("loaded.tree.amui",n),e.$element.find("."+this.classes.branch+':not(".'+this.classes.open+', .am-hide")').each(function(){e.discloseFolder(o(this).find("."+e.classes.branchHeader))})},discloseAll:function(){var e=this;"undefined"==typeof e.$element.data("disclosures")&&e.$element.data("disclosures",0);var t=e.options.disclosuresUpperLimit>=1&&e.$element.data("disclosures")>=e.options.disclosuresUpperLimit,s=0===e.$element.find("."+this.classes.branch+':not(".'+this.classes.open+', .am-hide")').length;if(s)e.$element.trigger("disclosedAll.tree.amui",{tree:e.$element,disclosures:e.$element.data("disclosures")}),e.options.cacheItems||e.$element.one("closeAll.tree.amui",function(){e.$element.data("disclosures",0)});else{if(t&&(e.$element.trigger("exceededDisclosuresLimit.tree.amui",{tree:e.$element,disclosures:e.$element.data("disclosures")}),!e.$element.data("ignore-disclosures-limit")))return;e.$element.data("disclosures",e.$element.data("disclosures")+1),e.$element.one("disclosedVisible.tree.amui",function(){e.discloseAll()}),e.discloseVisible()}},_getIconClass:function(e,t){return(t?".":"")+"am-icon-"+e},_getClass:function(e,t){return(t?".":"")+this.options.classPrefix+"-"+e}},r.prototype.openFolder=r.prototype.discloseFolder,o.fn.tree=function(e){var t,s=Array.prototype.slice.call(arguments,1),n=this.each(function(){var n=o(this),i=n.data("amui.tree"),l="object"==typeof e&&e;i||n.data("amui.tree",i=new r(this,l)),"string"==typeof e&&(t="function"==typeof i[e]?i[e].apply(i,s):i[e])});return void 0===t?n:t},o.fn.tree.defaults={dataSource:function(e,t){},multiSelect:!1,cacheItems:!0,folderSelect:!0,itemSelect:!0,disclosuresUpperLimit:0,folderIcon:"plus-square-o",folderOpenIcon:"minus-square-o",itemIcon:"angle-right",itemSelectedIcon:"check",hiddenClass:"am-hide",classPrefix:"am-tree",classes:{branch:"branch",branchName:"branch-name",branchChildren:"branch-children",branchHeader:"branch-header",item:"item",itemName:"item-name",label:"label",icon:"icon",iconFolder:"icon-folder",iconItem:"icon-item",iconCaret:"icon-caret",loader:"loader",selected:"selected",open:"open"}},o.fn.tree.Constructor=r,o.fn.tree.noConflict=function(){return o.fn.tree=c,this},t.exports=r},{}]},{},[1])(1)});